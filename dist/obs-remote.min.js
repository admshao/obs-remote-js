function convertToOBSSource(a){return new OBSSource(a)}function convertToOBSScene(a){var b=a.name,c=[];return a.filters&&a.filters.forEach(function(a){c.push(convertToOBSSource(a))}),a.sources&&a.sources.forEach(function(a){c.push(convertToOBSSource(a))}),new OBSScene(b,c)}!function(){"use strict";function a(b){var c=this;this.filters=[],this.name=b.name||"",this.visible=b.visible||!0,this.audio=b.audio||!1,this.volume=b.volume||0,this.type=b.type||a.TYPE.INPUT,b.filters&&b.filters.length>0&&b.filters.forEach(function(b){c.filters.push(new a(b))})}a.TYPE=Object.freeze({INPUT:0,FILTER:1,TRANSITION:2,SCENE:3}),"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports.OBSSource=a:window.OBSSource=a}(),function(){"use strict";function a(a,b){var c=this;this.name=a||"",this.sources=[],this.filters=[],b.forEach(function(a){switch(a.type){case OBSSource.TYPE.INPUT:case OBSSource.TYPE.SCENE:c.sources.push(a);break;case OBSSource.TYPE.FILTER:c.filters.push(a)}})}"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports.OBSScene=a:window.OBSScene=a}(),function(){"use strict";function a(){}function b(a){return unescape(encodeURIComponent(a))}function c(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;e<d;e++)b+=String.fromCharCode(c[e]);return btoa(b)}if(a.webCryptoHash=function(a,e){var f=b(a),g=b(OBSRemote.auth.salt),h=c(f+g),i=this;i.crypto.subtle.digest("SHA-256",h).then(function(a){var f=b(d(a)),g=b(OBSRemote.auth.challenge),h=c(f+g);i.crypto.subtle.digest("SHA-256",h).then(function(a){var b=d(a);e(b)})})},a.cryptoJSHash=function(a,c){var d=b(a),e=b(OBSRemote.auth.salt),f=CryptoJS.SHA256(d+e).toString(CryptoJS.enc.Base64),g=b(f),h=b(OBSRemote.auth.challenge),i=CryptoJS.SHA256(g+h).toString(CryptoJS.enc.Base64);c(i)},a.nodeCryptoHash=function(a,c){var d=self.crypto.createHash("sha256"),e=b(a),f=b(OBSRemote.auth.salt);d.update(e+f);var g=d.digest("base64"),h=self.crypto.createHash("sha256"),i=b(g),j=b(OBSRemote.auth.challenge);h.update(i+j);var k=h.digest("base64");c(k)},"undefined"!=typeof module&&"undefined"!=typeof module.exports)a.crypto=require("crypto"),a.authHash=a.nodeCryptoHash,module.exports.OBSCrypto=a;else{if(a.crypto=window.crypto||window.msCrypto||{},a.authHash=a.webCryptoHash,"undefined"==typeof crypto.subtle)if("undefined"==typeof crypto.webkitSubtle){if("undefined"==typeof CryptoJS)throw new Error("OBS Remote requires CryptoJS when native crypto is not available!");a.authHash=a.cryptoJSHash}else a.crypto.subtle=a.crypto.webkitSubtle;window.OBSCrypto=a}}(),function(){"use strict";function a(b){a.API_VERSION=1,a.DEFAULT_PORT=4444,a.WS_PROTOCOL="obsapi",a.MAX_MSG_ID=4294967295,a.auth={salt:"",challenge:""},this._debug=b||!1,this._connected=!1,this._socket=void 0,this._messageCounter=0,this._responseCallbacks={}}var b={},c={},d={};"undefined"!=typeof module&&"undefined"!=typeof module.exports?(d=module.exports.OBSScene,c=module.exports.OBSSource,b=module.exports.OBSCrypto,window.WebSocket=require("ws")):(d=window.OBSScene,c=window.OBSSource,b=window.OBSCrypto),a.prototype.connect=function(b,c){c="undefined"==typeof c?"":c,b="undefined"==typeof b||""===b?"localhost":b;var d=b.indexOf(":");(d<0||d===b.length-1)&&(b+=":"+a.DEFAULT_PORT),this._connected&&(this._socket.close(),this._connected=!1),"undefined"!=typeof module&&"undefined"!=typeof module.exports?this._socket=new WebSocket("ws://"+b,{protocol:a.WS_PROTOCOL}):this._socket=new WebSocket("ws://"+b,a.WS_PROTOCOL);var e=this;this._socket.onopen=function(){e._connected=!0,e.isAuthRequired(function(a){e.onConnectionOpened(a),a&&e.authenticate(c)})},this._socket.onclose=function(){e._connected&&e.onConnectionClosed(),e._connected=!1},this._socket.onerror=function(a){e.onConnectionFailed(a),e._connected=!1},this._socket.onmessage=function(a){e._messageReceived(a)}},a.prototype.authenticate=function(a){var c=this;b.authHash(a,function(a){function b(a){"ok"!==a.status?c.onAuthenticationFailed():c.onAuthenticationSucceeded()}c._sendMessage("Authenticate",{auth:a},b)})},a.prototype.getVersion=function(a){function b(b){a(b.version)}this._sendMessage("GetVersion",b)},a.prototype.isAuthRequired=function(b){function c(c){var d=c.authRequired;d&&(a.auth.salt=c.salt,a.auth.challenge=c.challenge),b(d)}this._sendMessage("GetAuthRequired",c)},a.prototype.getSceneList=function(a){function b(b){var c=b["current-scene"],d=[];b.scenes.forEach(function(a){d.push(convertToOBSScene(a))}),a(c,d)}this._sendMessage("GetSceneList",b)},a.prototype.getSceneNames=function(a){function b(b){var c=[];b.scenes.forEach(function(a){c.push(a.name)}),a(c)}this._sendMessage("GetSceneNames",b)},a.prototype.getCurrentScene=function(a){function b(b){var c=convertToOBSScene(b);a(c)}this._sendMessage("GetCurrentScene",b)},a.prototype.setCurrentScene=function(a){this._sendMessage("SetCurrentScene",{"scene-name":a})},a.prototype.startRecording=function(){this._sendMessage("StartRecording")},a.prototype.stopRecording=function(){this._sendMessage("StopRecording")},a.prototype.recordingActive=function(a){function b(b){a(b.recording)}this._sendMessage("RecordingActive",b)},a.prototype.startStreaming=function(){this._sendMessage("StartStreaming")},a.prototype.stopStreaming=function(){this._sendMessage("StopStreaming")},a.prototype.streamingActive=function(a){function b(b){a(b.streaming)}this._sendMessage("StreamingActive",b)},a.prototype.listSceneCollections=function(a){function b(b){var c=[];b["scene-collections"].forEach(function(a){c.push(a.name)}),a(c)}this._sendMessage("ListSceneCollections",b)},a.prototype.setCurrentSceneCollection=function(a){this._sendMessage("SetCurrentSceneCollection",{"scene-collection-name":a})},a.prototype.getCurrentSceneCollection=function(a){function b(b){a(b["scene-collection-name"])}this._sendMessage("GetCurrentSceneCollection",b)},a.prototype.listProfiles=function(a){function b(b){var c=[];b.profiles.forEach(function(a){c.push(a.name)}),a(c)}this._sendMessage("ListProfiles",b)},a.prototype.setCurrentProfile=function(a){this._sendMessage("SetCurrentProfile",{"profile-name":a})},a.prototype.getCurrentProfile=function(a){function b(b){a(b["profile-name"])}this._sendMessage("GetCurrentProfile",b)},a.prototype.getGlobalAudioList=function(a){function b(b){var c=[];b.sources.forEach(function(a){c.push(convertToOBSSource(a))}),a(c)}this._sendMessage("GetGlobalAudioList",b)},a.prototype.setVolume=function(a,b){this._sendMessage("SetVolume",{source:a,volume:b})},a.prototype.getVolume=function(a,b){function c(a){b(a.volume)}this._sendMessage("GetVolume",{source:a},c)},a.prototype.setMuted=function(a,b){this._sendMessage("SetMuted",{source:a,muted:b})},a.prototype._sendMessage=function(a,b,c){if(this._connected){var d=this._getNextMsgId();"function"==typeof b&&(c=b,b={}),b=b||{},c=c||function(){},this._responseCallbacks[d]=c,b["message-id"]=d,b["request-type"]=a;var e=JSON.stringify(b);this._socket.send(e)}},a.prototype._getNextMsgId=function(){return this._messageCounter+=1,this._messageCounter>a.MAX_MSG_ID&&(this._messageCounter=0),this._messageCounter+""},a.prototype._messageReceived=function(a){var b=JSON.parse(a.data);if(b){var c=this;c._debug&&console.log(b);var d=b["update-type"];if(d)switch(d){case"RecordingStarting":this.onRecordingStarting();break;case"RecordingStarted":this.onRecordingStarted();break;case"RecordingStopping":this.onRecordingStopping();break;case"RecordingStopped":this.onRecordingStopped();break;case"StreamingStarting":this.onStreamingStarting();break;case"StreamingStarted":this.onStreamingStarted();break;case"StreamingStopping":this.onStreamingStopping();break;case"StreamingStopped":this.onStreamingStopped();break;case"ProfileChanged":this.onProfileChanged();break;case"ProfileListChanged":this.onProfileListChanged();break;case"SceneCollectionChanged":this.onSceneCollectionChanged();break;case"SceneCollectionListChanged":this.onSceneCollectionListChanged();break;case"SwitchScenes":this.onSceneSwitched(b["scene-name"]);break;case"ScenesChanged":this.getSceneList(function(a,b){c.onSceneListChanged(a,b)});break;case"ItemAdd":this.onItemAdd(convertToOBSSource(b));break;case"ItemRemove":this.onItemRemove(b.name);break;case"ItemReorder":this.onItemReorder(b.sources);break;case"ItemVisible":this.onItemVisible(b.source,b.visible);break;case"ItemRename":this.onItemRenamed(b.prev_name,b.new_name);break;case"ItemSelect":this.onItemSelect(b.name);break;case"ItemDeselect":this.onItemDeselect(b.name);break;case"SourceVolume":this.onSourceVolume(b.name,b.volume);break;case"SourceMute":this.onSourceMute(b.name,b.muted);break;case"GlobalAudioSourcesChanged":this.getGlobalAudioList(function(a){c.onGlobalAudioSourcesChanged(a)});break;case"Exit":this.onExit();break;default:console.warn("[OBSRemote] Unknown OBS update type:",d,", full message:",b)}else{var e=b["message-id"];"error"===b.status&&console.error("[OBSRemote] Error:",b.error);var f=this._responseCallbacks[e];f&&(f(b),delete this._responseCallbacks[e])}}},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:window.OBSRemote=a}(),OBSRemote.prototype.onConnectionOpened=function(){},OBSRemote.prototype.onConnectionClosed=function(){},OBSRemote.prototype.onConnectionFailed=function(){},OBSRemote.prototype.onAuthenticationSucceeded=function(){},OBSRemote.prototype.onAuthenticationFailed=function(){},OBSRemote.prototype.onSceneSwitched=function(a){},OBSRemote.prototype.onSceneListChanged=function(a,b){},OBSRemote.prototype.onRecordingStarting=function(){},OBSRemote.prototype.onRecordingStarted=function(){},OBSRemote.prototype.onRecordingStopping=function(){},OBSRemote.prototype.onRecordingStopped=function(){},OBSRemote.prototype.onStreamingStarting=function(){},OBSRemote.prototype.onStreamingStarted=function(){},OBSRemote.prototype.onStreamingStopping=function(){},OBSRemote.prototype.onStreamingStopped=function(){},OBSRemote.prototype.onSceneCollectionChanged=function(){},OBSRemote.prototype.onSceneCollectionListChanged=function(){},OBSRemote.prototype.onProfileChanged=function(){},OBSRemote.prototype.onProfileListChanged=function(){},OBSRemote.prototype.onItemVisible=function(a,b){},OBSRemote.prototype.onItemAdd=function(a){},OBSRemote.prototype.onItemRemove=function(a){},OBSRemote.prototype.onItemReorder=function(a){},OBSRemote.prototype.onItemRenamed=function(a,b){},OBSRemote.prototype.onItemSelect=function(a,b){},OBSRemote.prototype.onItemDeselect=function(a,b){},OBSRemote.prototype.onSourceVolume=function(a,b){},OBSRemote.prototype.onSourceMute=function(a,b){},OBSRemote.prototype.onGlobalAudioSourcesChanged=function(a){},OBSRemote.prototype.onExit=function(){};